add_library(MetaWareNN
            MetaWareNN.cpp
            MetaWareNNFactory.cpp
            MetaWareNNFunction.cpp
            MetaWareNNDeviceManager.cpp
            metawarenn_lib/metawarenn_tensor.cc
            metawarenn_lib/metawarenn_node.cc
            metawarenn_lib/metawarenn_value_info.cc
            metawarenn_lib/metawarenn_attribute.cc
            metawarenn_lib/metawarenn_utils.cc
            metawarenn_lib/kernels/helpers/mli_helpers.cc
            metawarenn_lib/op/add.cc
            metawarenn_lib/op/avg_pool.cc
            metawarenn_lib/op/constant.cc
            metawarenn_lib/op/conv.cc
            metawarenn_lib/op/depthwise_conv.cc
            metawarenn_lib/op/input_data.cc
            metawarenn_lib/op/node.cc
            metawarenn_lib/op/relu.cc
            metawarenn_lib/op/reshape.cc
            metawarenn_lib/op/softmax.cc
            metawarenn_lib/op/transpose.cc
            metawarenn_lib/op/global_avg_pool.cc
            metawarenn_lib/op/gemm.cc
            metawarenn_lib/op/max_pool.cc
            metawarenn_lib/op/flatten.cc
            metawarenn_lib/op/batch_normalization.cc
            metawarenn_lib/op/concat.cc
            metawarenn_lib/op/lrn.cc
            metawarenn_lib/op/mul.cc
            metawarenn_lib/op/clip.cc
            metawarenn_lib/op/squeeze.cc
            metawarenn_lib/op/unsqueeze.cc
            metawarenn_lib/op/gather.cc
            metawarenn_lib/op/shape.cc
            metawarenn_lib/op/mean.cc
            metawarenn_lib/op/split.cc
            metawarenn_lib/op/strided_slice.cc
            metawarenn_lib/op/pad.cc
            metawarenn_lib/op/dense.cc
            metawarenn_lib/op/batch_flatten.cc
            metawarenn_lib/op/bias_add.cc
            metawarenn_lib/op/divide.cc
            metawarenn_lib/op/exp.cc
            metawarenn_lib/op/max.cc
            metawarenn_lib/op/maximum.cc
            metawarenn_lib/op/minimum.cc
            metawarenn_lib/op/subtract.cc
            metawarenn_lib/op/sum.cc
            metawarenn_lib/op/channel_shuffle.cc
            metawarenn_lib/op/fully_connected.cc
            metawarenn_lib/optimizer/metawarenn_optimizer.cc
            metawarenn_lib/optimizer/remove_reshape.cc
            metawarenn_lib/optimizer/fuse_relu.cc
            metawarenn_lib/optimizer/convert_layout.cc
            metawarenn_lib/optimizer/remove_transpose.cc
            metawarenn_lib/optimizer/pass_manager.cc
            metawarenn_lib/optimizer/calculate_offset.cc
            metawarenn_lib/optimizer/fuse_batchnorm.cc
            metawarenn_lib/mwnnconvert/mwnn_protobuf/cpp_wrapper/MWNN.pb.cc
            metawarenn_lib/mwnn_inference_api/mwnn_inference_api.cc
            metawarenn_lib/mwnn_inference_api/mwnn_inference_shm.cc
            metawarenn_lib/executable_network/metawarenn_executable_graph.cc
            metawarenn_lib/executable_network/metawarenn_serialization.cc)
set(PROTOBUF_LIB "${CMAKE_CURRENT_SOURCE_DIR}/libprotobuf.so")
target_link_libraries(MetaWareNN
                      Backend
                      -lrt
                      ${PROTOBUF_LIB})

set(linked_backends ${linked_backends} MetaWareNN PARENT_SCOPE)
